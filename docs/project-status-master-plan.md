# ATLAS 프로젝트 점검 보고서 & 보완 설계 완성본

## 1) 현재 상태 점검 (Repository 기준)

아래는 현재 코드베이스를 기준으로 **이미 구현된 축**과 **보완이 필요한 축**을 분리한 결과입니다.

### A. 이미 골격이 갖춰진 영역
- 아키텍처 문서/로드맵/리뷰 문서가 이미 존재합니다.
- `src/core`, `src/data`, `src/llm`, `src/agents`, `src/simulator`, `src/analytics`, `src/dashboard`가 모두 생성되어 있습니다.
- LLM 어댑터(DeepSeek/Gemini/Claude/GPT), 비용 추적, 호출 로깅, 파서가 파일 단위로 준비되어 있습니다.
- 대시보드 페이지도 단순 1~2개가 아니라 상태/리스크/리플레이 등 확장 페이지까지 잡혀 있습니다.

### B. 지금 당장 리스크가 큰 영역
- 모듈 수가 기획 대비 크게 확장되어 있어, 안정화 없이 기능 추가를 계속하면 운영 실패 확률이 높습니다.
- “실시간 운영”과 “실험 재현성”을 동시에 만족시키기 위한 운영 표준(실험 버전 고정, 로그 스키마 고정, 실패 복구 절차)이 문서로 단일화되어 있지 않습니다.
- P0/P1/P2 우선순위는 정의되어 있지만, 실제로 어떤 기능을 잠시 비활성화하고 어떤 흐름을 먼저 고정할지에 대한 **컷라인(동결 기준)**이 약합니다.

---

## 2) 핵심 판단: 지금 필요한 것은 “확장”이 아니라 “수렴”

현 상태는 “기획이 약해서 못 만드는 단계”가 아니라, 반대로 “기능이 많아져서 일관된 운영 실험이 어려워질 수 있는 단계”입니다.

따라서 다음 원칙으로 재정렬합니다.

1. **실험 단위 고정:** 먼저 Crypto 단일 시장 + Single Agent 벤치마크를 완전 고정.
2. **관측 가능성 우선:** 성능 개선보다 실패 원인 추적 가능성(로그/리플레이/대시보드 상태)을 우선.
3. **점진 확장:** Multi-Agent, KRX/US, 고급 분석은 단계적 해금.

---

## 3) 보완된 최종 설계안 (운영 중심)

## 3-1. 운영 단계(Phase) 재정의

### Phase A — 운영 안정화 (필수)
- 범위: `CRYPTO + Single(DeepSeek/Gemini/Claude/GPT-ref) + Buy&Hold`
- 목표: 72시간 무중단 + 데이터/시그널/체결/지표 파이프라인 무결성 검증
- 산출물:
  - 사이클 성공률
  - 모델별 파싱 성공률
  - 에러 유형 분류표(네트워크/파싱/DB/타임아웃)

### Phase B — 실험 확장 (권장)
- 범위: Multi-Agent 추가, Cost-Adjusted Alpha 본격 비교
- 목표: “멀티가 싱글 대비 비용 대비 우월한가?” 정량화

### Phase C — 시장 확장 (선택)
- 범위: KRX/US 활성화 + 뉴스/매크로/국면 분석 본격 적용
- 목표: 시장별 일반화 가능성 평가

---

## 3-2. 시스템 보완 포인트

### 1) 재현성 계층 강화
- 스냅샷/프롬프트/원문응답/파싱결과를 하나의 `experiment_id`, `cycle_id`로 묶어 추적.
- “같은 입력에 같은 출력이 나오는가”를 검증하는 리플레이 루틴을 정식 운영 체크로 승격.

### 2) 실패 격리 표준화
- 에이전트 1개 실패 시 전체 사이클 중단 금지(HOLD 대체) 원칙을 운영 체크리스트로 고정.
- DB 지연/일시 장애 시 로컬 큐(파일 또는 메모리)에 임시 적재 후 비동기 flush.

### 3) 대시보드 목적 분리
- Overview: 성과 표시
- System Status: 운영 상태/오류율/SLA 표시
- Replay Viewer: 사후 감사(Audit)

즉, “예쁜 차트”보다 “장애 시 왜 실패했는지 5분 안에 찾는 것”을 우선합니다.

---

## 4) 수정된 로드맵 (실행 가능한 버전)

## Week 0.5 (즉시)
- 현재 기능 inventory 작성 (핵심 경로 기준: 수집→시그널→체결→지표→표시)
- 비핵심 모듈 임시 feature-flag 처리
- 기준 실험 설정 1세트 고정 (`crypto_single_v1`)

## Week 1
- Crypto Single 72h Dry Run
- 장애 로그 분류 자동화
- 파서 실패 케이스 회귀 테스트 보강

## Week 2
- Multi-Agent를 1개 모델(예: Claude)로 먼저 제한 오픈
- 비용/지연/성과 지표 동시 모니터링
- CAA 지표 대시보드 고정

## Week 3
- Multi-Agent 4모델 전체 확대
- 이벤트 트리거(급변동 사이클) 운영
- 리플레이 기반 품질 감사 루틴 주간화

## Week 4+
- KRX/US 확장
- 국면 분석 + 통계 비교 리포트 자동화

---

## 5) 완료 정의(Definition of Done) — 이번 설계 완성본 기준

다음 8개가 충족되면 “기획-설계 완료”로 간주합니다.

1. 운영 우선순위가 P0→P1→P2로 실제 코드 실행 경로에 반영됨
2. 실험 버전(`experiment_id`) 단위 재현 루틴 존재
3. 72시간 무중단 운용 로그가 남음
4. 모델별 실패가 전체 중단으로 전파되지 않음
5. 대시보드에서 성과/상태/감사가 분리 표시됨
6. 비용 지표(Cost per Signal, CAA)가 기본 카드로 노출됨
7. 고정 사이클 + 이벤트 트리거가 동시 운용 가능
8. 결과 보고서가 최소 Markdown/CSV로 자동 생성됨

---

## 6) 결론

- 현재 프로젝트는 “초기 기획 단계”를 이미 넘어섰고, 구조적으로는 상당히 앞서 있습니다.
- 지금의 핵심은 기능 추가가 아니라 **운영 실험의 품질 관리**입니다.
- 본 보완안은 기존 설계를 뒤엎는 것이 아니라, 이미 만든 자산을 **실제 성과가 나오는 순서로 재배치**한 실행 계획입니다.

